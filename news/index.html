<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • SimInf</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimInf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">9.8.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/mparse.html">Getting started with `mparse`</a></li>
    <li><a class="dropdown-item" href="../articles/post-process-data.html">Post-process data in a trajectory</a></li>
    <li><a class="dropdown-item" href="../articles/scheduled-events.html">Scheduled events</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stewid/SimInf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/stewid/SimInf/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="siminf-development-version">SimInf (development version)<a class="anchor" aria-label="anchor" href="#siminf-development-version"></a></h2>
<div class="section level3">
<h3 id="changes-or-improvements-development-version">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-development-version"></a></h3>
<p>Renamed the <code>abc</code> function argument <code>ninit</code> to <code>n_init</code>.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.8.1" id="siminf-981-2024-06-21">SimInf 9.8.1 (2024-06-21)<a class="anchor" aria-label="anchor" href="#siminf-981-2024-06-21"></a></h2><p class="text-muted">CRAN release: 2024-06-21</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-8-1">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-8-1"></a></h3>
<ul><li>Added package anchors in the documentation for all Rd  targets not in the package itself and the base packages.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-9-8-1">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-9-8-1"></a></h3>
<ul><li>Fix model parser (mparse) to resolve dependencies between variables in the transitions when multiple variables have zero dependencies.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.7.0" id="siminf-970-2024-04-23">SimInf 9.7.0 (2024-04-23)<a class="anchor" aria-label="anchor" href="#siminf-970-2024-04-23"></a></h2><p class="text-muted">CRAN release: 2024-04-23</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-7-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-7-0"></a></h3>
<ul><li><p>Two new features have been added to the model parser. First, it is now possible to define variables in the transitions, which can then be used in calculations of propensities or in calculations of other variables. Secondly, enumeration constants can now be generated for the indices to each parameter in the <code>u</code>, <code>v</code>, <code>ldata</code>, and <code>gdata</code> vectors in the generated C code. See the <code><a href="../reference/mparse.html">mparse()</a></code> documentation.</p></li>
<li><p>Added a utility function <code><a href="../reference/node_events.html">node_events()</a></code> to facilitate cleaning raw individual event data and prepare it for usage in SimInf.</p></li>
<li><p>Added a new vignette about how to post-process data from a simulated trajectory.</p></li>
<li><p>Added a new section about varying probability of picking individuals to the scheduled events vignette.</p></li>
<li><p>Added a missing PROTECT in the C function SimInf_distance_matrix. This was uncovered by rchk on CRAN.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.6.0" id="siminf-960-2023-12-20">SimInf 9.6.0 (2023-12-20)<a class="anchor" aria-label="anchor" href="#siminf-960-2023-12-20"></a></h2><p class="text-muted">CRAN release: 2023-12-20</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-6-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-6-0"></a></h3>
<ul><li><p>Fixed CRAN check warnings for print format specifiers.</p></li>
<li><p>Added a utility function ‘individual_events’ to facilitate cleaning raw individual event data and prepare it for usage in SimInf.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.5.0" id="siminf-950-2023-01-23">SimInf 9.5.0 (2023-01-23)<a class="anchor" aria-label="anchor" href="#siminf-950-2023-01-23"></a></h2><p class="text-muted">CRAN release: 2023-01-23</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-5-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-5-0"></a></h3>
<ul><li>Fixed the configuration script to use R to find the compiler to use.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.4.0" id="siminf-940-2023-01-06">SimInf 9.4.0 (2023-01-06)<a class="anchor" aria-label="anchor" href="#siminf-940-2023-01-06"></a></h2><p class="text-muted">CRAN release: 2023-01-06</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-4-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-4-0"></a></h3>
<ul><li><p>Fix the ‘package_skeleton’ function to generate internal C code with valid C entry names if the package name contains ‘.’, for example, for a package named ‘pkg.name’.</p></li>
<li><p>Changed the usage of ‘any(is.na(x))’ to ‘anyNA(x)’ in the R code.</p></li>
<li><p>Internal refactoring of the ‘distance_matrix’ function to reduce memory usage.</p></li>
<li><p>Ensure to check for a valid model object after updating model data.</p></li>
<li><p>Moved the enumeration of event types to the header file ‘inst/SimInf.h’</p></li>
<li><p>Fixed problems identified with static analysis of the C code using the cppcheck and scan-build tools.</p></li>
<li><p>Added the getter function ‘u0’ to get the initial compartment state of a model.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.3.1" id="siminf-931-2022-10-07">SimInf 9.3.1 (2022-10-07)<a class="anchor" aria-label="anchor" href="#siminf-931-2022-10-07"></a></h2><p class="text-muted">CRAN release: 2022-10-07</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-3-1">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-3-1"></a></h3>
<ul><li><p>Cast the return value from R_GetCCallable(“SimInf”, “SimInf_run”); to the correct function pointer type.</p></li>
<li><p>Fix strict-prototype warnings.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.2.0" id="siminf-920-2022-09-03">SimInf 9.2.0 (2022-09-03)<a class="anchor" aria-label="anchor" href="#siminf-920-2022-09-03"></a></h2><p class="text-muted">CRAN release: 2022-09-03</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-2-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-2-0"></a></h3>
<ul><li><p>Renamed the set/get funtions <code>update_u0</code> and <code>update_v0</code> to <code>u0</code>and <code>v0</code>, respectively.</p></li>
<li><p>Some internal refactoring of the C code to set number of threads when using OpenMP.</p></li>
<li><p>Changed to coerce to a sparse matrix via virtual classes in order to work with the upcoming Matrix package update.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.1.0" id="siminf-910-2022-06-08">SimInf 9.1.0 (2022-06-08)<a class="anchor" aria-label="anchor" href="#siminf-910-2022-06-08"></a></h2><p class="text-muted">CRAN release: 2022-06-08</p>
<div class="section level3">
<h3 id="changes-or-improvements-9-1-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-1-0"></a></h3>
<ul><li><p>Added a new built-in Susceptible-Infected-Susceptible model: <code>SIS</code>.</p></li>
<li><p>Added the functions <code>update_u0</code> and <code>update_v0</code> to update the initial state in a model.</p></li>
<li><p>Added the <code>pfilter</code> function to run a bootstrap particle algorithm on a model. See the documentation for an example.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-9-1-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-9-1-0"></a></h3>
<ul><li>Fixed the unnamed non-character argument ‘usr’ in par() when ploting the density of the ABC posterior distribution.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="9.0.0" id="siminf-900-2022-04-20">SimInf 9.0.0 (2022-04-20)<a class="anchor" aria-label="anchor" href="#siminf-900-2022-04-20"></a></h2><p class="text-muted">CRAN release: 2022-04-20</p>
<p>This release of SimInf focuses primarily on improving the functionality for performing Approximate Bayesian computation.</p>
<div class="section level3">
<h3 id="breaking-changes-9-0-0">BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#breaking-changes-9-0-0"></a></h3>
<p>Backwards incompatible changes that are the reason why the major version has been incremented.</p>
<ul><li>Redesigned the S4 class SimInf_abc and the interface to using the Approximate Bayesian Computation Sequential Monte Carlo (‘ABC-SMC’) algorithm, see the documentation for the ‘abc’ function. Moreover, added functionality to adaptively select a sequence of tolerances using the algorithm ‘Adaptive Approximate Bayesian Computation Tolerance Selection’ of Simola and others (2021), Bayesian Analysis.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-or-improvements-9-0-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-9-0-0"></a></h3>
<ul><li>Added the function ‘n_generations’ to determine the number of generations in a ‘SimInf_abc’ object.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-9-0-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-9-0-0"></a></h3>
<ul><li>The <code>plot</code> function for the SimInf_abc class now passes the additional arguments in ‘…’ to the underlying plot functions.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="8.4.0" id="siminf-840-2021-09-19">SimInf 8.4.0 (2021-09-19)<a class="anchor" aria-label="anchor" href="#siminf-840-2021-09-19"></a></h2><p class="text-muted">CRAN release: 2021-09-19</p>
<div class="section level3">
<h3 id="changes-or-improvements-8-4-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-8-4-0"></a></h3>
<ul><li>The ‘events’, ‘gdata’, ‘gdata&lt;-’, ‘ldata’, ‘punchcard&lt;-’, ‘select_matrix’, ‘select_matrix&lt;-’ ‘shift_matrix’, and ‘shift_matrix&lt;-’ functions were changed to S4 methods.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-8-4-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-8-4-0"></a></h3>
<ul><li>Protect against an integer overflow that could occur in the ‘punchcard’ method for a model with many nodes, compartments and time-points.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="8.3.2" id="siminf-832-2021-06-29">SimInf 8.3.2 (2021-06-29)<a class="anchor" aria-label="anchor" href="#siminf-832-2021-06-29"></a></h2><p class="text-muted">CRAN release: 2021-06-30</p>
<div class="section level3">
<h3 id="bug-fixes-8-3-2">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-8-3-2"></a></h3>
<ul><li><p>Updated the build configuration script (‘src/Makevars.ucrt’) for Windows UCRT to fix the installation failure on CRAN introduced in version 8.3.0. Thanks to Tomas Kalibera for providing the patch.</p></li>
<li><p>Improved the test logic for checks using multiple threads to also check that the number of available threads is greater than one before running a test using two threads. Thanks to Tomas Kalibera for reporting a test failure on CRAN r-devel-windows-x86_64-gcc10-UCRT on a machine using one thread.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="8.3.0" id="siminf-830-2021-06-24">SimInf 8.3.0 (2021-06-24)<a class="anchor" aria-label="anchor" href="#siminf-830-2021-06-24"></a></h2><p class="text-muted">CRAN release: 2021-06-25</p>
<div class="section level3">
<h3 id="changes-or-improvements-8-3-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-8-3-0"></a></h3>
<ul><li><p>Changed the R dependency to R(&gt;= 4.0).</p></li>
<li><p>Refactoring of the build configuration script on Windows.</p></li>
<li><p>Added functionality to fit models to time series data using the Approximate Bayesian Computation Sequential Monte Carlo (‘ABC-SMC’) algorithm of Toni and others (2009) <a href="https://doi.org/10.1098/rsif.2008.0172" class="external-link">doi: 10.1098/rsif.2008.0172</a>.</p></li>
<li><p>Added a vignette about scheduled events. This vignette is work-in-progress and not yet complete.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="8.2.0" id="siminf-820-2020-12-06">SimInf 8.2.0 (2020-12-06)<a class="anchor" aria-label="anchor" href="#siminf-820-2020-12-06"></a></h2><p class="text-muted">CRAN release: 2020-12-06</p>
<div class="section level3">
<h3 id="improvements-8-2-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-8-2-0"></a></h3>
<ul><li><p>Prevalence function: better handling of condition in prevalence formula.</p></li>
<li><p>Use ‘Date’ on the x-axis when plotting events if time was specified in a Date format.</p></li>
<li><p>Return event ‘time’ as Date and ‘event’ type as character when coercing events to a ‘data.frame’ if they were specified as Date and character.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="8.1.0" id="siminf-810-2020-10-18">SimInf 8.1.0 (2020-10-18)<a class="anchor" aria-label="anchor" href="#siminf-810-2020-10-18"></a></h2><p class="text-muted">CRAN release: 2020-10-18</p>
<p>This release of SimInf focuses primarily on improving the plotting of trajectory data.</p>
<div class="section level3">
<h3 id="changes-or-improvements-8-1-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-8-1-0"></a></h3>
<ul><li><p>The plotting functionality has been improved to allow visualisation of the prevalence using the same formula notation as the ‘prevalence’ function, see the documentation. In addition, the box around the plot has been removed and the legend has been moved to the top.</p></li>
<li><p>The prevalence function has been updated to always return a matrix when format=‘matrix’. Before it returned a vector instead of a ‘1 x length(tspan)’ matrix when the level argument was equal to 1 or 2, or when level = 3 and the prevalence included one node only.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="8.0.0" id="siminf-800-2020-09-13">SimInf 8.0.0 (2020-09-13)<a class="anchor" aria-label="anchor" href="#siminf-800-2020-09-13"></a></h2><p class="text-muted">CRAN release: 2020-09-13</p>
<p>This release of SimInf includes improvements and changes to facilitate post-processing of trajectory data and future development of the package.</p>
<div class="section level3">
<h3 id="improvements-8-0-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-8-0-0"></a></h3>
<ul><li><p>Added the ‘compartments’ and ‘index’ arguments to the ‘boxplot’ and ‘pairs’ plotting methods to facilitate analysis of a simulated trajectory, see the documentation.</p></li>
<li><p>The build configuration script has been improved to identify if OpenMP can be used. It is also possible to skip the check for OpenMP if –disable-openmp is specified when installing the package.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-8-0-0">BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#breaking-changes-8-0-0"></a></h3>
<p>Backwards incompatible changes that are the reason why the major version has been incremented.</p>
<ul><li><p>The ‘prevalence’ function was changed to an S4 method. Moreover, the ‘type’ character argument was renamed to ‘level’ and changed to an integer argument. The reason for renaming the ‘type’ argument was to prepare for improvements in the plot function in the future to display the prevalence but where there is already an argument called ‘type’. Additionally, the ‘as.is’ argument was renamed to ‘format’ for clarity. Finally, the unused ‘…’ argument was removed. See the documentation for examples.</p></li>
<li><p>The ‘trajectory’ function was changed to an S4 method. Furthermore, the node index argument was renamed from ‘node’ to ‘index’ to facilitate future development where indices can also represent other structures in a model. Additionally, the ‘as.is’ argument was renamed to ‘format’ for clarity. Finally, the unused ‘…’ argument was removed. See the documentation for examples.</p></li>
<li><p>The ‘Nn’ function to determine the number of nodes in a model has been replaced with the S4 method ‘n_nodes’.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="7.0.1" id="siminf-701-2020-06-18">SimInf 7.0.1 (2020-06-18)<a class="anchor" aria-label="anchor" href="#siminf-701-2020-06-18"></a></h2><p class="text-muted">CRAN release: 2020-06-18</p>
<div class="section level3">
<h3 id="changes-7-0-1">CHANGES<a class="anchor" aria-label="anchor" href="#changes-7-0-1"></a></h3>
<ul><li>Removed the timestamp from the first line of the C code generated by ‘mparse’ in order to keep the hash of the C-code constant, even if the code is regenerated at a later time with an identical model. This avoids re-compiling the C-code for the model, if the source code has already been compiled.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-7-0-1">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-7-0-1"></a></h3>
<ul><li><p>Fixed a problem that prevented re-compiling the model C-code even though it had changed.</p></li>
<li><p>Changed to use the ‘R_FINITE’ instead of ‘isfinite’ in the internal C function ‘SimInf_print_status’</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="7.0.0" id="siminf-700-2020-05-23">SimInf 7.0.0 (2020-05-23)<a class="anchor" aria-label="anchor" href="#siminf-700-2020-05-23"></a></h2><p class="text-muted">CRAN release: 2020-05-23</p>
<div class="section level3">
<h3 id="changes-or-improvements-7-0-0">CHANGES OR IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#changes-or-improvements-7-0-0"></a></h3>
<ul><li><p>The beta and gamma parameters in the built-in SIR model have been moved internally from ‘gdata’ to ‘ldata’ to allow node specific parameter values.</p></li>
<li><p>The beta, gamma and epsilon parameters in the built-in SEIR model have been moved internally from ‘gdata’ to ‘ldata’ to allow node specific parameter values.</p></li>
<li><p>In order to reduce the compilation-time when running multiple simulations of a model that contains C code, the MD5 hash of the C code is used to determine if a model has already been compiled and the DLL loaded, and thus the compilation step can be skipped before running a trajectory.</p></li>
<li><p>The C functions ‘SimInf_forward_euler_linear_decay’ and ‘SimInf_local_spread’ are now available to be called by C code in another package.</p></li>
<li><p>The values in the ‘E’ matrix are now used as weights when sampling individuals for the exit, internal transfer and external transfer events. The individuals are sampled, one by one, without replacement from the compartments specified by ‘E[, select]’ in such a way that the probability that a particular individual is sampled at a given draw is proportional to the weight in ‘E[, select]’.</p></li>
<li><p>The values in the ‘E’ matrix are now used as weights for enter events. If the column ‘E[, select]’ contains several non-zero entries, the compartment to add an individual to is sampled in such a way that the probability is proportional to the weight in ‘E[, select]’.</p></li>
<li><p>The scheduled enter events can now use ‘proportion’ when ‘n = 0’, see description of breaking changes below. Additionally, the ‘shift’ feature can also be used to further control in which compartments individuals are added.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-7-0-0">BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#breaking-changes-7-0-0"></a></h3>
<p>Backwards incompatible changes that are the reason why the major version has been incremented.</p>
<ul><li><p>Removed the ‘run_outer’ function.</p></li>
<li><p>Removed the unused ‘threads’ argument from the ‘SimInf_run’ function (use ‘set_num_threads’ to specify the number of threads). The ‘SimInf_run’ function is the C function that a model calls to simulate a trajectory. Because of this change, model packages created with a previous version of SimInf must be modified/recreated to work with this version of SimInf.</p></li>
<li><p>Events with n = 0 utilize the proportion instead to calculate the number of individuals affected by the event. The number was previously calculated by multiplying the number of individuals in a node by the proportion in the event. This made it tricky to use proportion for a scheduled event when the proportion was very small or very large and the number of individuals in a node was small, since the result was that it always rounded to 0 individuals with a small proportion and all individuals with a large proportion. This has been replaced with a sampling from a binomial distribution to determine the number of individuals affected by the event. Thanks to Thomas Rosendal in PR <a href="https://github.com/stewid/SimInf/issues/28" class="external-link">#28</a>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.5.1" id="siminf-651-2020-04-01">SimInf 6.5.1 (2020-04-01)<a class="anchor" aria-label="anchor" href="#siminf-651-2020-04-01"></a></h2><p class="text-muted">CRAN release: 2020-04-01</p>
<div class="section level3">
<h3 id="bug-fixes-6-5-1">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-6-5-1"></a></h3>
<ul><li>Fixed a memory access error in the internal C code that was introduced in the recently released 6.5.0 version. Detected by the CRAN gcc-UBSAN tests (Undefined Behavior Sanitizer).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.5.0" id="siminf-650-2020-03-29">SimInf 6.5.0 (2020-03-29)<a class="anchor" aria-label="anchor" href="#siminf-650-2020-03-29"></a></h2><p class="text-muted">CRAN release: 2020-03-29</p>
<div class="section level3">
<h3 id="improvements-6-5-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-6-5-0"></a></h3>
<ul><li><p>It’s now possible to have a ‘tspan’ vector of length one to simulate over one time-unit only i.e. [t, t+1).</p></li>
<li><p>The <code>trajectory</code> function has been ported to C and parallelized to efficiently transform simulated data from a model to a <code>data.frame</code>.</p></li>
<li><p>Static code analysis of the codebase has been performed using the <code>lintr</code> package in order to improve code style, consistency and readability.</p></li>
<li><p>It’s now possible to specify what type of plot should be drawn from the simulated data, see the documentation.</p></li>
<li><p>Better documentation of the SISe, SISe3, SISe_sp, and SISe3_sp models.</p></li>
</ul></div>
<div class="section level3">
<h3 id="changes-6-5-0">CHANGES<a class="anchor" aria-label="anchor" href="#changes-6-5-0"></a></h3>
<ul><li><p>The way to specify the number of threads to use in parallelized functions has been changed to fix that specifying the number of threads should only affect SimInf and not other packages using OpenMP. Use <code>set_num_threads</code> to specify the number of threads, see documentation. It still works to pass the number of threads to the <code><a href="../reference/run.html">run()</a></code> function, however, the <code>threads</code> argument will be removed from <code><a href="../reference/run.html">run()</a></code> in a future release.</p></li>
<li><p>Updated the vignette to use the ‘set_num_threads’ function.</p></li>
<li><p>To avoid cluttering the error message, the name of the internal function that generated the error has been removed from the error message (use <code>traceback</code> to print the call stack of the last uncaught error). Additionally, all error messages now ends with a <code>.</code> (full stop).</p></li>
<li><p>Removed the row and column names from the internal matrices U and V because they were not used anywhere in the code.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-6-5-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-6-5-0"></a></h3>
<ul><li>Fix storing solution of the state vectors of the first time point until after simulated time has passed the the first time point in tspan.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.4.0" id="siminf-640-2019-11-12">SimInf 6.4.0 (2019-11-12)<a class="anchor" aria-label="anchor" href="#siminf-640-2019-11-12"></a></h2><p class="text-muted">CRAN release: 2019-11-11</p>
<div class="section level3">
<h3 id="changes-6-4-0">CHANGES<a class="anchor" aria-label="anchor" href="#changes-6-4-0"></a></h3>
<ul><li><p>Updated the vignette, the CITATION file and added the DOI for the JSS publication to DESCRIPTION/Description.</p></li>
<li><p>Renamed the NEWS file to NEWS.md and changed to use markdown format style.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fix-6-4-0">BUG FIX<a class="anchor" aria-label="anchor" href="#bug-fix-6-4-0"></a></h3>
<ul><li>Removed a timestamp from a test to avoid a possible test failure.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.3.0" id="siminf-630-2019-05-26">SimInf 6.3.0 (2019-05-26)<a class="anchor" aria-label="anchor" href="#siminf-630-2019-05-26"></a></h2><p class="text-muted">CRAN release: 2019-05-26</p>
<div class="section level3">
<h3 id="improvements-6-3-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-6-3-0"></a></h3>
<ul><li><p>The <code>prevalence</code> function now supports an additional condition in the formula specification to further control the population to include in the calculation, see the documentation.</p></li>
<li><p>It is now possible to write the C code snippet of the <code>pts_fun</code> argument to <code>mparse</code> as a text string with line breaks instead of as a vector of character lines.</p></li>
<li><p>The summary function of a model generated with the <code>mparse</code> functionality now includes the propensity of each transition.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-6-3-0">BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#breaking-changes-6-3-0"></a></h3>
<ul><li>Removed the <code>U&lt;-</code> and <code>V&lt;-</code> methods. Use the new <code>punchcard&lt;-</code> method instead, see the documentation.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-6-3-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-6-3-0"></a></h3>
<ul><li><p>Fix storing solution of the continuous state vector v up to time t, but not including t, when t has passed the next time in tspan.</p></li>
<li><p>Fix a link-type optimization type mismatch in the internal C function <code>SimInf_ldata_sp</code> (detected by the CRAN checks).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.2.0" id="siminf-620-2018-11-20">SimInf 6.2.0 (2018-11-20)<a class="anchor" aria-label="anchor" href="#siminf-620-2018-11-20"></a></h2><p class="text-muted">CRAN release: 2018-11-20</p>
<div class="section level3">
<h3 id="improvements-6-2-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-6-2-0"></a></h3>
<ul><li><p>The <code>mparse</code> model builder functionality has been improved to be able to generate models that contain node specific local data and continuous state variables. It is also possible to pass the C code of the post time step function to <code>mparse</code>. See documentation.</p></li>
<li><p>The package skeleton method has been updated to handle the the improved functionlity of <code>mparse</code>.</p></li>
<li><p>Print summary of the local data when the <code>ldata</code> matrix in the model has row names.</p></li>
<li><p>It’s now possible to pass <code>gdata</code>, <code>ldata</code> and <code>v0</code> as data.frames to the <code>SimInf_model</code> function.</p></li>
<li><p>Better error message when an invalid rate or a negative state is detected during a simulation.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.1.0" id="siminf-610-2018-08-13">SimInf 6.1.0 (2018-08-13)<a class="anchor" aria-label="anchor" href="#siminf-610-2018-08-13"></a></h2><p class="text-muted">CRAN release: 2018-08-13</p>
<div class="section level3">
<h3 id="improvements-6-1-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-6-1-0"></a></h3>
<ul><li><p>Print better error message when processing scheduleed events to facilitate debugging.</p></li>
<li><p>Some fixes to the vignette.</p></li>
<li><p>Updated CITATION file.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-6-1-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-6-1-0"></a></h3>
<ul><li>Fixed broken mparse example.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="6.0.0" id="siminf-600-2018-04-21">SimInf 6.0.0 (2018-04-21)<a class="anchor" aria-label="anchor" href="#siminf-600-2018-04-21"></a></h2><p class="text-muted">CRAN release: 2018-04-20</p>
<div class="section level3">
<h3 id="improvements-6-0-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-6-0-0"></a></h3>
<ul><li><p>The <code>print</code> and <code>summary</code> methods have been improved to include a summary of the data in the model and the number of individuals in each compartment.</p></li>
<li><p>Added the <code>trajectory</code> method to facilitate post-processing of simulation data. See documentation.</p></li>
<li><p>The event type, when specifying the scheduled events from a data.frame, can now be coded either as a numerical value or as a character string, see the documentataion for the <code>SimInf_events</code> method.</p></li>
<li><p>Now SimInf also includes the All Events Method (AEM) solver (Bauer P., Engblom S. (2015) Sensitivity Estimation and Inverse Problems in Spatial Stochastic Models of Chemical Kinetics. In: Abdulle A., Deparis S., Kressner D., Nobile F., Picasso M. (eds) Numerical Mathematics and Advanced Applications - ENUMATH 2013. Lecture Notes in Computational Science and Engineering, vol 103. Springer, Cham. Doi: 10.1007/978-3-319-10705-9_51). A core feature of the AEM solver is that reaction events are carried out in channels which access private streams of random numbers, in contrast to the Gillespie direct method where one use only one stream for all events. We have added a new <code>solver</code> argument to the <code>run</code> method.</p></li>
<li><p>The <code>package_skeleton</code> method have been updated to handle the new <code>solver</code> argument.</p></li>
<li><p>The event type, when specifying the scheduled events from a data.frame, can now be coded either as a numerical value or as a character string, see the documentataion for the <code>SimInf_events</code> method.</p></li>
<li><p>Added the utility function <code>select_matrix</code> to get/set the E matrix of the events slot of a SimInf_model object.</p></li>
<li><p>Added the utility function <code>shift_matrix</code> to get/set the N matrix of the events slot of a SimInf_model object.</p></li>
<li><p>Added the utility function <code>gdata</code> to get/set parameters in the global data vector that is common to all nodes in a SimInf_model object.</p></li>
<li><p>Added the utility function <code>ldata</code> to get the local data vector of a node in a SimInf_model object.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-6-0-0">BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#breaking-changes-6-0-0"></a></h3>
<ul><li><p>We have changed <code>mparse</code> method to make it even easier to specify a new model for the Siminf framework, see the documentation.</p></li>
<li><p>Removed the following methods: <code>U</code>, <code>V</code>, <code>recovered</code>, <code>susceptible</code>, and <code>infected</code>. Use the new <code>trajectory</code> method instead, see the documentation.</p></li>
<li><p>Renamed the type option <code>bnp</code> to <code>nop</code> in the <code>prevalence</code> method to calculate the proportion of nodes with at least one case.</p></li>
<li><p>Removed the <code>seed</code> argument from the <code>run</code> method. Use <code>set.seed</code> instead.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="5.1.0" id="siminf-510-2017-10-18">SimInf 5.1.0 (2017-10-18)<a class="anchor" aria-label="anchor" href="#siminf-510-2017-10-18"></a></h2><p class="text-muted">CRAN release: 2017-10-18</p>
<div class="section level3">
<h3 id="bug-fixes-5-1-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-5-1-0"></a></h3>
<ul><li><p>Added missing calls to <code>PROTECT</code> to protect newly created R objects in C code from the garbage collector.</p></li>
<li><p>Protect against invalid transition index in direct SSA.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="5.0.1" id="siminf-501">SimInf 5.0.1<a class="anchor" aria-label="anchor" href="#siminf-501"></a></h2>
<div class="section level3">
<h3 id="improvements-5-0-1">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-5-0-1"></a></h3>
<ul><li>Improvements in the vignette.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="5.0.0" id="siminf-500-2017-06-13">SimInf 5.0.0 (2017-06-13)<a class="anchor" aria-label="anchor" href="#siminf-500-2017-06-13"></a></h2><p class="text-muted">CRAN release: 2017-06-13</p>
<div class="section level3">
<h3 id="new-features-5-0-0">NEW FEATURES<a class="anchor" aria-label="anchor" href="#new-features-5-0-0"></a></h3>
<ul><li><p>Added a vignette that provide a technical description of the framework, how to use a predefined model in SimInf, demonstrate a case study, and finally show how to extend the framework with a user defined model.</p></li>
<li><p>Added the <code>pairs</code> and <code>boxplot</code> methods to visualise the number of individuals in each compartment.</p></li>
<li><p>Added <code>spaghetti</code> argument to the plot method to draw one line for each node.</p></li>
<li><p>Added the method <code>package_skeleton</code> to create a package skeleton for a model depending on SimInf.</p></li>
</ul></div>
<div class="section level3">
<h3 id="changes-5-0-0">CHANGES<a class="anchor" aria-label="anchor" href="#changes-5-0-0"></a></h3>
<ul><li>Renamed <code>plot</code> argument <code>which</code> to <code>N</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="improvements-5-0-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-5-0-0"></a></h3>
<ul><li><p>The core solver now checks the return value from the transition rate functions and raise an error if the return value is non-finite or less than zero.</p></li>
<li><p>Added example data (<code>nodes</code>) with a population of 1600 nodes within a 50 square kilometer region to facilitate illustration of various models.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-5-0-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-5-0-0"></a></h3>
<ul><li>Added missing call to <code>PROTECT</code> to protect newly created matrices (R objects) from the garbage collector.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4.0.0" id="siminf-400-2017-03-21">SimInf 4.0.0 (2017-03-21)<a class="anchor" aria-label="anchor" href="#siminf-400-2017-03-21"></a></h2><p class="text-muted">CRAN release: 2017-03-21</p>
<div class="section level3">
<h3 id="new-features-4-0-0">NEW FEATURES<a class="anchor" aria-label="anchor" href="#new-features-4-0-0"></a></h3>
<ul><li><p>Added the <code>V</code> and <code>U</code> getter/setter methods to the <code>SimInf_model</code>.</p></li>
<li><p>The header file <code>SimInf.h</code> was added to the folder <code>inst/include</code> to enable <code>LinkingTo: SimInf</code>. A call to <code>R_RegisterCCallable</code> was added to make the <code>SimInf_run</code> C routine available to other packages.</p></li>
<li><p>The slots <code>U_sparse</code> and <code>V_sparse</code> was added to the <code>SimInf_model</code>. The slots <code>U_sparse</code> and <code>V_sparse</code> holds the result if the model was initialized to write the solution to a sparse matrix.</p></li>
<li><p>The slot <code>C_code</code> was added to the <code>SimInf_model</code>. Character vector with optional model C code. If non-empty, the C code is written to a temporary C-file when the <code>run</code> method is called. The temporary C-file is compiled and the resulting DLL is dynamically loaded. The DLL is unloaded and the temporary files are removed after running the model.</p></li>
<li><p>The <code>mparse</code> model parser was added. The parser generates the model matrices <code>G</code> and <code>S</code> and C code from a text string specification of the model, for example, c(“S -&gt; k1<em>S</em>I -&gt; I”, “I -&gt; k2*I -&gt; R”) expresses a SIR model. The S4 class <code>SimInf_mparse</code> was added to support this feature.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-4-0-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-4-0-0"></a></h3>
<ul><li><p>Added the model compartment names to the model <code>u0</code> and <code>U</code> matrices to facilitate inspection of data.</p></li>
<li><p>Removed the max node size constraint when sampling individuals for scheduled events from more than two compartments (fixes issue <a href="https://github.com/stewid/SimInf/issues/3" class="external-link">#3</a>).</p></li>
<li><p>The <code>tspan</code> vector argument to the <code>siminf_model</code> method can now be either an <code>integer</code> or a <code>Date</code> vector. A <code>Date</code> vector is internally coerced to a numeric vector as days, where <code>tspan[1]</code> becomes the day of the year of the first year of the tspan argument. The dates are added as names to the numeric vector.</p></li>
<li><p>Improved plot methods by adding colors and increase line widths.</p></li>
<li><p>Improved build configuration to register native routines.</p></li>
</ul></div>
<div class="section level3">
<h3 id="changes-4-0-0">CHANGES<a class="anchor" aria-label="anchor" href="#changes-4-0-0"></a></h3>
<ul><li><p>The S4 class <code>siminf_model</code> was renamed to <code>SimInf_model</code>.</p></li>
<li><p>Copy <code>u0</code> and <code>v0</code> to the first column in <code>U</code> and <code>V</code>, respectively. Prior to this change, the state was copied after the first time step.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.0" id="siminf-300-2017-01-29">SimInf 3.0.0 (2017-01-29)<a class="anchor" aria-label="anchor" href="#siminf-300-2017-01-29"></a></h2><p class="text-muted">CRAN release: 2017-01-29</p>
<div class="section level3">
<h3 id="new-features-3-0-0">NEW FEATURES<a class="anchor" aria-label="anchor" href="#new-features-3-0-0"></a></h3>
<ul><li>Two new built-in models: <code>SIR</code> and <code>SEIR</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="changes-3-0-0">CHANGES<a class="anchor" aria-label="anchor" href="#changes-3-0-0"></a></h3>
<ul><li><p>Removed the sub-domain argument. Instead use the local data vector <code>ldata</code> to pass node specific data.</p></li>
<li><p>Removed the unused parameter <code>epsilon</code> from the <code>SISe_sp</code> and <code>SISe3_sp</code> models.</p></li>
<li><p>Refactoring of local spread in the <code>SISe_sp</code> and <code>SISe3_sp</code> models.</p></li>
<li><p>Added a parameter with a pointer to a random number generator to the post time step function.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="siminf-200-2016-05-04">SimInf 2.0.0 (2016-05-04)<a class="anchor" aria-label="anchor" href="#siminf-200-2016-05-04"></a></h2><p class="text-muted">CRAN release: 2016-05-04</p>
<div class="section level3">
<h3 id="new-features-2-0-0">NEW FEATURES<a class="anchor" aria-label="anchor" href="#new-features-2-0-0"></a></h3>
<ul><li><p>Two new built-in models: <code>SISe_sp</code> and <code>SISe3_sp</code> with spatial coupling.</p></li>
<li><p>Added the <code>run_outer</code> method to run a model on scaled <code>gdata</code> parameters.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-2-0-0">IMPROVEMENTS<a class="anchor" aria-label="anchor" href="#improvements-2-0-0"></a></h3>
<ul><li><p>Added two synthetic datasets <code>u0_SISe3</code> and <code>events_SISe3</code> to demonstrate how to use SimInf.</p></li>
<li><p>Several improvements to the documentation.</p></li>
<li><p>Added summary method to the siminf_model class and the scheduled_events class.</p></li>
</ul></div>
<div class="section level3">
<h3 id="changes-2-0-0">CHANGES<a class="anchor" aria-label="anchor" href="#changes-2-0-0"></a></h3>
<ul><li><p>The slot N in scheduled_events is changed from dgCMatrix to matrix.</p></li>
<li><p>Refactoring of the <code>show</code> method for the siminf_model class and the scheduled_events class.</p></li>
<li><p>Renamed function prototype <code>PostTimeStepFun</code> to <code>PTSFun</code> and <code>PropensityFun</code> to <code>TRFun</code>.</p></li>
<li><p>Renamed <code>init</code> argument to <code>u0</code> in the <code>SISe</code> and <code>SISe3</code> methods.</p></li>
<li><p>Changed <code>node</code>, <code>dest</code>, <code>select</code> and <code>shift</code> to one-based indices in <code>scheduled_events</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-0-0">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-2-0-0"></a></h3>
<ul><li>Changed to use <code>gsl_rng_uniform_pos</code> instead of <code>gsl_rng_uniform</code> to avoid 0 in the direct SSA. If zero was randomly selected and the first compartment empty, the simulator could enter a negative state.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="siminf-100-2016-01-08">SimInf 1.0.0 (2016-01-08)<a class="anchor" aria-label="anchor" href="#siminf-100-2016-01-08"></a></h2><p class="text-muted">CRAN release: 2016-01-08</p>
<ul><li>First release.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stefan Widgren, Robin Eriksson, Stefan Engblom, Pavol Bauer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

