<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Post-process data in a trajectory • SimInf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Post-process data in a trajectory">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimInf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">9.8.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/mparse.html">Getting started with `mparse`</a></li>
    <li><a class="dropdown-item" href="../articles/post-process-data.html">Post-process data in a trajectory</a></li>
    <li><a class="dropdown-item" href="../articles/scheduled-events.html">Scheduled events</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stewid/SimInf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Post-process data in a trajectory</h1>
                        <h4 data-toc-skip class="author">Stefan Widgren
<a href="https://orcid.org/0000-0001-5745-2284" class="external-link">
<img src="https://info.orcid.org/wp-content/uploads/2019/11/orcid_16x16.png" alt="ORCID logo" width="16" height="16" style="border-style:none;"></a>
</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/stewid/SimInf/blob/main/vignettes/post-process-data.Rmd" class="external-link"><code>vignettes/post-process-data.Rmd</code></a></small>
      <div class="d-none name"><code>post-process-data.Rmd</code></div>
    </div>

    
    
<p>After a model is created, a simulation is started with a call to the
<code><a href="../reference/run.html">run()</a></code> function with the model as the first argument. The
function returns a modified model object with a single stochastic
solution trajectory attached to it. Trajectory data contains the state
of each compartment, recorded at every time-point in <code>tspan</code>.
This document introduces you to functionality in <code>SimInf</code> to
post-process and explore that trajectory data.</p>
<div class="section level2">
<h2 id="extract-trajectory-data-with-trajectory">Extract trajectory data with <code>trajectory()</code><a class="anchor" aria-label="anchor" href="#extract-trajectory-data-with-trajectory"></a>
</h2>
<p>Most modelling and simulation studies require custom data analysis
once the simulation data has been generated. To support this, SimInf
provides the <code><a href="../reference/trajectory.html">trajectory()</a></code> method to obtain a
<code>data.frame</code> with the number of individuals in each
compartment at the time points specified in <code>tspan</code>.</p>
<p>Let’s simulate 10 days of data from an SIR model with 6 nodes. For
reproducibility, we first call the <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> function and
specify the number of threads to use for the simulation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/stewid/SimInf" class="external-link">SimInf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/set_num_threads.html">set_num_threads</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">u0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>S <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">101</span>, <span class="fl">102</span>, <span class="fl">103</span>, <span class="fl">104</span>, <span class="fl">105</span><span class="op">)</span>,</span>
<span>                 I <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>                 R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SIR.html">SIR</a></span><span class="op">(</span>u0 <span class="op">=</span> <span class="va">u0</span>,</span>
<span>              tspan <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>              beta <span class="op">=</span> <span class="fl">0.16</span>,</span>
<span>              gamma <span class="op">=</span> <span class="fl">0.077</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p>Extract the number of individuals in each compartment at the
time-points in <code>tspan</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    node time   S  I R</span></span>
<span><span class="co">## 1     1    1 100  1 0</span></span>
<span><span class="co">## 2     2    1 101  2 0</span></span>
<span><span class="co">## 3     3    1 102  3 0</span></span>
<span><span class="co">## 4     4    1 102  5 0</span></span>
<span><span class="co">## 5     5    1 103  6 0</span></span>
<span><span class="co">## 6     6    1 105  6 0</span></span>
<span><span class="co">## 7     1    2 100  1 0</span></span>
<span><span class="co">## 8     2    2 101  2 0</span></span>
<span><span class="co">## 9     3    2 101  4 0</span></span>
<span><span class="co">## 10    4    2 101  5 1</span></span>
<span><span class="co">## 11    5    2 103  6 0</span></span>
<span><span class="co">## 12    6    2 105  6 0</span></span>
<span><span class="co">## 13    1    3  99  2 0</span></span>
<span><span class="co">## 14    2    3 101  2 0</span></span>
<span><span class="co">## 15    3    3 101  4 0</span></span>
<span><span class="co">## 16    4    3  99  6 2</span></span>
<span><span class="co">## 17    5    3 101  8 0</span></span>
<span><span class="co">## 18    6    3 103  7 1</span></span>
<span><span class="co">## 19    1    4  98  3 0</span></span>
<span><span class="co">## 20    2    4 101  2 0</span></span>
<span><span class="co">## 21    3    4 101  4 0</span></span>
<span><span class="co">## 22    4    4  98  6 3</span></span>
<span><span class="co">## 23    5    4  99 10 0</span></span>
<span><span class="co">## 24    6    4 101  8 2</span></span>
<span><span class="co">## 25    1    5  98  3 0</span></span>
<span><span class="co">## 26    2    5 101  2 0</span></span>
<span><span class="co">## 27    3    5 100  5 0</span></span>
<span><span class="co">## 28    4    5  97  6 4</span></span>
<span><span class="co">## 29    5    5  98  9 2</span></span>
<span><span class="co">## 30    6    5 101  6 4</span></span>
<span><span class="co">## 31    1    6  98  2 1</span></span>
<span><span class="co">## 32    2    6 101  2 0</span></span>
<span><span class="co">## 33    3    6 100  5 0</span></span>
<span><span class="co">## 34    4    6  97  5 5</span></span>
<span><span class="co">## 35    5    6  98  8 3</span></span>
<span><span class="co">## 36    6    6 100  7 4</span></span>
<span><span class="co">## 37    1    7  98  2 1</span></span>
<span><span class="co">## 38    2    7  98  5 0</span></span>
<span><span class="co">## 39    3    7 100  5 0</span></span>
<span><span class="co">## 40    4    7  92 10 5</span></span>
<span><span class="co">## 41    5    7  98  7 4</span></span>
<span><span class="co">## 42    6    7  99  8 4</span></span>
<span><span class="co">## 43    1    8  97  3 1</span></span>
<span><span class="co">## 44    2    8  98  5 0</span></span>
<span><span class="co">## 45    3    8  98  6 1</span></span>
<span><span class="co">## 46    4    8  92  8 7</span></span>
<span><span class="co">## 47    5    8  95 10 4</span></span>
<span><span class="co">## 48    6    8  99  8 4</span></span>
<span><span class="co">## 49    1    9  97  3 1</span></span>
<span><span class="co">## 50    2    9  97  6 0</span></span>
<span><span class="co">## 51    3    9  98  4 3</span></span>
<span><span class="co">## 52    4    9  91  9 7</span></span>
<span><span class="co">## 53    5    9  94 10 5</span></span>
<span><span class="co">## 54    6    9  99  7 5</span></span>
<span><span class="co">## 55    1   10  97  3 1</span></span>
<span><span class="co">## 56    2   10  96  6 1</span></span>
<span><span class="co">## 57    3   10  98  4 3</span></span>
<span><span class="co">## 58    4   10  89 11 7</span></span>
<span><span class="co">## 59    5   10  93  9 7</span></span>
<span><span class="co">## 60    6   10  98  8 5</span></span></code></pre>
<p>Extract the number of recovered individuals in the first node.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="va">result</span>, compartments <span class="op">=</span> <span class="st">"R"</span>, index <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    node time R</span></span>
<span><span class="co">## 1     1    1 0</span></span>
<span><span class="co">## 2     1    2 0</span></span>
<span><span class="co">## 3     1    3 0</span></span>
<span><span class="co">## 4     1    4 0</span></span>
<span><span class="co">## 5     1    5 0</span></span>
<span><span class="co">## 6     1    6 1</span></span>
<span><span class="co">## 7     1    7 1</span></span>
<span><span class="co">## 8     1    8 1</span></span>
<span><span class="co">## 9     1    9 1</span></span>
<span><span class="co">## 10    1   10 1</span></span></code></pre>
<p>Extract the number of recovered individuals in the first and third
node.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trajectory.html">trajectory</a></span><span class="op">(</span><span class="va">result</span>, compartments <span class="op">=</span> <span class="st">"R"</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    node time R</span></span>
<span><span class="co">## 1     1    1 0</span></span>
<span><span class="co">## 2     3    1 0</span></span>
<span><span class="co">## 3     1    2 0</span></span>
<span><span class="co">## 4     3    2 0</span></span>
<span><span class="co">## 5     1    3 0</span></span>
<span><span class="co">## 6     3    3 0</span></span>
<span><span class="co">## 7     1    4 0</span></span>
<span><span class="co">## 8     3    4 0</span></span>
<span><span class="co">## 9     1    5 0</span></span>
<span><span class="co">## 10    3    5 0</span></span>
<span><span class="co">## 11    1    6 1</span></span>
<span><span class="co">## 12    3    6 0</span></span>
<span><span class="co">## 13    1    7 1</span></span>
<span><span class="co">## 14    3    7 0</span></span>
<span><span class="co">## 15    1    8 1</span></span>
<span><span class="co">## 16    3    8 1</span></span>
<span><span class="co">## 17    1    9 1</span></span>
<span><span class="co">## 18    3    9 3</span></span>
<span><span class="co">## 19    1   10 1</span></span>
<span><span class="co">## 20    3   10 3</span></span></code></pre>
<p>Consult the help page for other <code><a href="../reference/trajectory.html">trajectory()</a></code> parameter
options.</p>
</div>
<div class="section level2">
<h2 id="calculate-prevalence-from-a-trajectory-using-prevalence">Calculate prevalence from a trajectory using
<code>prevalence()</code><a class="anchor" aria-label="anchor" href="#calculate-prevalence-from-a-trajectory-using-prevalence"></a>
</h2>
<p>Use the <code>prevalence</code> function to calculate the proportion
of individuals with disease in the population. The
<code><a href="../reference/prevalence.html">prevalence()</a></code> function takes a model object and a formula
specification, where the left-hand-side of the formula specifies the
compartments representing cases i.e. have an attribute or a disease. The
right-hand-side of the formula specifies the compartments at risk.</p>
<p>Let’s use the previously simulated data and determine the proportion
of infected individuals in the population at the time-points in
<code>tspan</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prevalence.html">prevalence</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    time prevalence</span></span>
<span><span class="co">## 1     1 0.03616352</span></span>
<span><span class="co">## 2     2 0.03773585</span></span>
<span><span class="co">## 3     3 0.04559748</span></span>
<span><span class="co">## 4     4 0.05188679</span></span>
<span><span class="co">## 5     5 0.04874214</span></span>
<span><span class="co">## 6     6 0.04559748</span></span>
<span><span class="co">## 7     7 0.05817610</span></span>
<span><span class="co">## 8     8 0.06289308</span></span>
<span><span class="co">## 9     9 0.06132075</span></span>
<span><span class="co">## 10   10 0.06446541</span></span></code></pre>
<p>Identical result is obtained with the shorthand ‘I ~ .’</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prevalence.html">prevalence</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    time prevalence</span></span>
<span><span class="co">## 1     1 0.03616352</span></span>
<span><span class="co">## 2     2 0.03773585</span></span>
<span><span class="co">## 3     3 0.04559748</span></span>
<span><span class="co">## 4     4 0.05188679</span></span>
<span><span class="co">## 5     5 0.04874214</span></span>
<span><span class="co">## 6     6 0.04559748</span></span>
<span><span class="co">## 7     7 0.05817610</span></span>
<span><span class="co">## 8     8 0.06289308</span></span>
<span><span class="co">## 9     9 0.06132075</span></span>
<span><span class="co">## 10   10 0.06446541</span></span></code></pre>
<p>The prevalence function has an argument <code>level</code> which has
a default <code>level = 1</code>. This returns the prevalence at the
whole population level. Since we have several nodes (farms if you like)
in the model now, we can also ask for the proportion of nodes with
infected individuals by specifying <code>level = 2</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prevalence.html">prevalence</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span>, level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    time prevalence</span></span>
<span><span class="co">## 1     1          1</span></span>
<span><span class="co">## 2     2          1</span></span>
<span><span class="co">## 3     3          1</span></span>
<span><span class="co">## 4     4          1</span></span>
<span><span class="co">## 5     5          1</span></span>
<span><span class="co">## 6     6          1</span></span>
<span><span class="co">## 7     7          1</span></span>
<span><span class="co">## 8     8          1</span></span>
<span><span class="co">## 9     9          1</span></span>
<span><span class="co">## 10   10          1</span></span></code></pre>
<p>Finally, we may wish to know the proportion of infected individuals
within each node with <code>level = 3</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prevalence.html">prevalence</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span>, level <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    node time prevalence</span></span>
<span><span class="co">## 1     1    1 0.00990099</span></span>
<span><span class="co">## 2     2    1 0.01941748</span></span>
<span><span class="co">## 3     3    1 0.02857143</span></span>
<span><span class="co">## 4     4    1 0.04672897</span></span>
<span><span class="co">## 5     5    1 0.05504587</span></span>
<span><span class="co">## 6     6    1 0.05405405</span></span>
<span><span class="co">## 7     1    2 0.00990099</span></span>
<span><span class="co">## 8     2    2 0.01941748</span></span>
<span><span class="co">## 9     3    2 0.03809524</span></span>
<span><span class="co">## 10    4    2 0.04672897</span></span>
<span><span class="co">## 11    5    2 0.05504587</span></span>
<span><span class="co">## 12    6    2 0.05405405</span></span>
<span><span class="co">## 13    1    3 0.01980198</span></span>
<span><span class="co">## 14    2    3 0.01941748</span></span>
<span><span class="co">## 15    3    3 0.03809524</span></span>
<span><span class="co">## 16    4    3 0.05607477</span></span>
<span><span class="co">## 17    5    3 0.07339450</span></span>
<span><span class="co">## 18    6    3 0.06306306</span></span>
<span><span class="co">## 19    1    4 0.02970297</span></span>
<span><span class="co">## 20    2    4 0.01941748</span></span>
<span><span class="co">## 21    3    4 0.03809524</span></span>
<span><span class="co">## 22    4    4 0.05607477</span></span>
<span><span class="co">## 23    5    4 0.09174312</span></span>
<span><span class="co">## 24    6    4 0.07207207</span></span>
<span><span class="co">## 25    1    5 0.02970297</span></span>
<span><span class="co">## 26    2    5 0.01941748</span></span>
<span><span class="co">## 27    3    5 0.04761905</span></span>
<span><span class="co">## 28    4    5 0.05607477</span></span>
<span><span class="co">## 29    5    5 0.08256881</span></span>
<span><span class="co">## 30    6    5 0.05405405</span></span>
<span><span class="co">## 31    1    6 0.01980198</span></span>
<span><span class="co">## 32    2    6 0.01941748</span></span>
<span><span class="co">## 33    3    6 0.04761905</span></span>
<span><span class="co">## 34    4    6 0.04672897</span></span>
<span><span class="co">## 35    5    6 0.07339450</span></span>
<span><span class="co">## 36    6    6 0.06306306</span></span>
<span><span class="co">## 37    1    7 0.01980198</span></span>
<span><span class="co">## 38    2    7 0.04854369</span></span>
<span><span class="co">## 39    3    7 0.04761905</span></span>
<span><span class="co">## 40    4    7 0.09345794</span></span>
<span><span class="co">## 41    5    7 0.06422018</span></span>
<span><span class="co">## 42    6    7 0.07207207</span></span>
<span><span class="co">## 43    1    8 0.02970297</span></span>
<span><span class="co">## 44    2    8 0.04854369</span></span>
<span><span class="co">## 45    3    8 0.05714286</span></span>
<span><span class="co">## 46    4    8 0.07476636</span></span>
<span><span class="co">## 47    5    8 0.09174312</span></span>
<span><span class="co">## 48    6    8 0.07207207</span></span>
<span><span class="co">## 49    1    9 0.02970297</span></span>
<span><span class="co">## 50    2    9 0.05825243</span></span>
<span><span class="co">## 51    3    9 0.03809524</span></span>
<span><span class="co">## 52    4    9 0.08411215</span></span>
<span><span class="co">## 53    5    9 0.09174312</span></span>
<span><span class="co">## 54    6    9 0.06306306</span></span>
<span><span class="co">## 55    1   10 0.02970297</span></span>
<span><span class="co">## 56    2   10 0.05825243</span></span>
<span><span class="co">## 57    3   10 0.03809524</span></span>
<span><span class="co">## 58    4   10 0.10280374</span></span>
<span><span class="co">## 59    5   10 0.08256881</span></span>
<span><span class="co">## 60    6   10 0.07207207</span></span></code></pre>
<p>Consult the help page for other <code><a href="../reference/prevalence.html">prevalence()</a></code> parameter
options.</p>
</div>
<div class="section level2">
<h2 id="visualize-a-trajectory-with-plot">Visualize a trajectory with <code>plot()</code><a class="anchor" aria-label="anchor" href="#visualize-a-trajectory-with-plot"></a>
</h2>
<p>The <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function is another useful way of inspecting
the outcome of a trajectory. It can display either the median and the
quantile range of the counts in all nodes, plot the counts in specified
nodes, or the prevalence. Below are some examples of using the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function.</p>
<p>Plot the median and interquartile range of the number of susceptible,
infected and recovered individuals.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the median and the middle 95% quantile range of the number of
susceptible, infected and recovered individuals.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, range <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the median and interquartile range of the number of infected
individuals.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"I"</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Use the formula notation instead to plot the median and interquartile
range of the number of infected individuals.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="op">~</span><span class="va">I</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the number of susceptible, infected and recovered individuals in
the first three nodes.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, index <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, range <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Use plot type line instead.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, index <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, range <span class="op">=</span> <span class="cn">FALSE</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the number of infected individuals in the first node.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"I"</span>, index <span class="op">=</span> <span class="fl">1</span>, range <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the proportion of infected individuals (cases) in the
population.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-16-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the proportion of nodes with infected individuals.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span>, level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the median and interquartile range of the proportion of infected
individuals in each node</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span>, level <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Plot the proportion of infected individuals in the first three
nodes.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">I</span> <span class="op">~</span> <span class="va">S</span> <span class="op">+</span> <span class="va">I</span> <span class="op">+</span> <span class="va">R</span>, level <span class="op">=</span> <span class="fl">3</span>, index <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, range <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="post-process-data_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto auto auto 0;"></p>
<p>Please run a couple of <code>plot(run(model))</code> to view the
stochasticity between trajectories. To find help on the SimInf plot
function for the model object run:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"plot,SimInf_model-method"</span>, package <span class="op">=</span> <span class="st">"SimInf"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stefan Widgren, Robin Eriksson, Stefan Engblom, Pavol Bauer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
